{# Reviews - Variant 2 #}

{% if reviews %}

  <div class="py-5 bg-primary">
    <div class="container">
      <div class="flex flex-wrap">
        <div class="w-full md:w-1/4 lg:w-1/5">
          <div class="flex justify-center md:justify-start mb-4 text-secondary">
            {% for i in 1..reviews.stats.average_rating|round(0, 'ceil') %}
              {% if fractal %}
                <svg class="icon text-2xl 2xl:text-3xl mx-1"><use href="#icon-star"></use></svg>
              {% else %}
                {{function ('icon', 'star', 'text-2xl 2xl:text-3xl mx-1')}}
              {% endif %}
            {% endfor %}
          </div>

          <div class="flex flex-wrap justify-center md:justify-start mb-6 md:mb-0">
            <div class="mr-12">
              <span class="text-gray-500">Rated</span>
              <span class="text-4xl 2xl:text-5xl text-white font-bold block leading-tight">{{ reviews.stats.average_rating|round(1, 'ceil') }}<span class="block font-light text-sm 2xl:text-base">out of 5</span></span>
            </div>

            <div class="text-center md:text-left">
              <span class="text-gray-500">Based on</span>
              <span class="text-4xl 2xl:text-5xl text-white font-bold block leading-tight">{{ reviews.stats.total_reviews }} <span class="block font-light text-sm 2xl:text-base">reviews</span></span>
            </div>
          </div>
        </div>

        <div class="flex justify-center w-full md:w-3/4 lg:w-4/5 ml-auto px-4 lg:px-6 relative">
          <ul class="flex w-full overflow-x-auto scrolling-touch md:-mx-5 2xl:-mx-8 carousel-container">
            {% for review in reviews.reviews %}
              <li class="w-full sm:w-1/2 lg:w-1/3 flex-none px-5 carousel-item">
                <div class="bg-white text-primary p-5 rounded-lg">
                  <div class="mb-3">
                    <p class="trim text-primary">{{ review.comments|slice(0, 200) ~ '...' }}</p>
                  </div>

                  <div>
                    {% for item in range(1, review.rating) %}
                      {% if fractal %}
                        <svg class="icon text-secondary"><use href="#icon-star"></use></svg>
                      {% else %}
                        {{function ('icon', 'star', 'text-secondary')}}
                      {% endif %}
                    {% endfor %}
                    <span class="text-sm text-gray-500">({{ review.rating }}/5)</span>
                  </div>

                  <p class="text-sm text-gray-500 leading-snug mt-3">
                    <span>{{ review.reviewer.first_name }} {{ review.reviewer.last_name }} -</span>
                    <span>{{ review.date }}</span>
                  </p>
                </div>
              </li>
            {% endfor %}
          </ul>
          <div class="absolute top-0 left-0 h-full flex items-center">
            <button class="carousel-arrow carousel-arrow-left px-0 py-2 opacity-25">
              {% if fractal %}
                <svg class="icon text-2xl xl:text-3xl block text-white"><use href="#icon-angle-left"></use></svg>
              {% else %}
                {{function ('icon', 'angle-left', 'text-2xl xl:text-3xl block text-white')}}
              {% endif %}
            </button>
          </div>
          
          <div class="absolute top-0 right-0 h-full flex items-center">
            <button class="carousel-arrow carousel-arrow-right px-0 py-2">
              {% if fractal %}
                <svg class="icon text-2xl xl:text-3xl block text-white"><use href="#icon-angle-right"></use></svg>
              {% else %}
                {{function ('icon', 'angle-right', 'text-2xl xl:text-3xl block text-white')}}
              {% endif %}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endif %}